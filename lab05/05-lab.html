<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml">

<head>

<meta charset="utf-8">
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="generator" content="pandoc" />
<meta name="viewport" content="width=device-width, initial-scale=1">

<style type="text/css">
@font-face {
font-family: octicons-link;
src: url(data:font/woff;charset=utf-8;base64,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) format('woff');
}
body {
-webkit-text-size-adjust: 100%;
text-size-adjust: 100%;
color: #333;
font-family: "Helvetica Neue", Helvetica, "Segoe UI", Arial, freesans, sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol";
font-size: 16px;
line-height: 1.6;
word-wrap: break-word;
}
a {
background-color: transparent;
}
a:active,
a:hover {
outline: 0;
}
strong {
font-weight: bold;
}
h1 {
font-size: 2em;
margin: 0.67em 0;
}
img {
border: 0;
}
hr {
box-sizing: content-box;
height: 0;
}
pre {
overflow: auto;
}
code,
kbd,
pre {
font-family: monospace, monospace;
font-size: 1em;
}
input {
color: inherit;
font: inherit;
margin: 0;
}
html input[disabled] {
cursor: default;
}
input {
line-height: normal;
}
input[type="checkbox"] {
box-sizing: border-box;
padding: 0;
}
table {
border-collapse: collapse;
border-spacing: 0;
}
td,
th {
padding: 0;
}
* {
box-sizing: border-box;
}
input {
font: 13px / 1.4 Helvetica, arial, nimbussansl, liberationsans, freesans, clean, sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol";
}
a {
color: #4078c0;
text-decoration: none;
}
a:hover,
a:active {
text-decoration: underline;
}
hr {
height: 0;
margin: 15px 0;
overflow: hidden;
background: transparent;
border: 0;
border-bottom: 1px solid #ddd;
}
hr:before {
display: table;
content: "";
}
hr:after {
display: table;
clear: both;
content: "";
}
h1,
h2,
h3,
h4,
h5,
h6 {
margin-top: 15px;
margin-bottom: 15px;
line-height: 1.1;
}
h1 {
font-size: 30px;
}
h2 {
font-size: 21px;
}
h3 {
font-size: 16px;
}
h4 {
font-size: 14px;
}
h5 {
font-size: 12px;
}
h6 {
font-size: 11px;
}
blockquote {
margin: 0;
}
ul,
ol {
padding: 0;
margin-top: 0;
margin-bottom: 0;
}
ol ol,
ul ol {
list-style-type: lower-roman;
}
ul ul ol,
ul ol ol,
ol ul ol,
ol ol ol {
list-style-type: lower-alpha;
}
dd {
margin-left: 0;
}
code {
font-family: Consolas, "Liberation Mono", Menlo, Courier, monospace;
font-size: 12px;
}
pre {
margin-top: 0;
margin-bottom: 0;
font: 12px Consolas, "Liberation Mono", Menlo, Courier, monospace;
}
.select::-ms-expand {
opacity: 0;
}
.octicon {
font: normal normal normal 16px/1 octicons-link;
display: inline-block;
text-decoration: none;
text-rendering: auto;
-webkit-font-smoothing: antialiased;
-moz-osx-font-smoothing: grayscale;
-webkit-user-select: none;
-moz-user-select: none;
-ms-user-select: none;
user-select: none;
}
.octicon-link:before {
content: '\f05c';
}
.markdown-body:before {
display: table;
content: "";
}
.markdown-body:after {
display: table;
clear: both;
content: "";
}
.markdown-body>*:first-child {
margin-top: 0 !important;
}
.markdown-body>*:last-child {
margin-bottom: 0 !important;
}
a:not([href]) {
color: inherit;
text-decoration: none;
}
.anchor {
display: inline-block;
padding-right: 2px;
margin-left: -18px;
}
.anchor:focus {
outline: none;
}
h1,
h2,
h3,
h4,
h5,
h6 {
margin-top: 1em;
margin-bottom: 16px;
font-weight: bold;
line-height: 1.4;
}
h1 .octicon-link,
h2 .octicon-link,
h3 .octicon-link,
h4 .octicon-link,
h5 .octicon-link,
h6 .octicon-link {
color: #000;
vertical-align: middle;
visibility: hidden;
}
h1:hover .anchor,
h2:hover .anchor,
h3:hover .anchor,
h4:hover .anchor,
h5:hover .anchor,
h6:hover .anchor {
text-decoration: none;
}
h1:hover .anchor .octicon-link,
h2:hover .anchor .octicon-link,
h3:hover .anchor .octicon-link,
h4:hover .anchor .octicon-link,
h5:hover .anchor .octicon-link,
h6:hover .anchor .octicon-link {
visibility: visible;
}
h1 {
padding-bottom: 0.3em;
font-size: 2.25em;
line-height: 1.2;
border-bottom: 1px solid #eee;
}
h1 .anchor {
line-height: 1;
}
h2 {
padding-bottom: 0.3em;
font-size: 1.75em;
line-height: 1.225;
border-bottom: 1px solid #eee;
}
h2 .anchor {
line-height: 1;
}
h3 {
font-size: 1.5em;
line-height: 1.43;
}
h3 .anchor {
line-height: 1.2;
}
h4 {
font-size: 1.25em;
}
h4 .anchor {
line-height: 1.2;
}
h5 {
font-size: 1em;
}
h5 .anchor {
line-height: 1.1;
}
h6 {
font-size: 1em;
color: #777;
}
h6 .anchor {
line-height: 1.1;
}
p,
blockquote,
ul,
ol,
dl,
table,
pre {
margin-top: 0;
margin-bottom: 16px;
}
hr {
height: 4px;
padding: 0;
margin: 16px 0;
background-color: #e7e7e7;
border: 0 none;
}
ul,
ol {
padding-left: 2em;
}
ul ul,
ul ol,
ol ol,
ol ul {
margin-top: 0;
margin-bottom: 0;
}
li>p {
margin-top: 16px;
}
dl {
padding: 0;
}
dl dt {
padding: 0;
margin-top: 16px;
font-size: 1em;
font-style: italic;
font-weight: bold;
}
dl dd {
padding: 0 16px;
margin-bottom: 16px;
}
blockquote {
padding: 0 15px;
color: #777;
border-left: 4px solid #ddd;
}
blockquote>:first-child {
margin-top: 0;
}
blockquote>:last-child {
margin-bottom: 0;
}
table {
display: block;
width: 100%;
overflow: auto;
word-break: normal;
word-break: keep-all;
}
table th {
font-weight: bold;
}
table th,
table td {
padding: 6px 13px;
border: 1px solid #ddd;
}
table tr {
background-color: #fff;
border-top: 1px solid #ccc;
}
table tr:nth-child(2n) {
background-color: #f8f8f8;
}
img {
max-width: 100%;
box-sizing: content-box;
background-color: #fff;
}
code {
padding: 0;
padding-top: 0.2em;
padding-bottom: 0.2em;
margin: 0;
font-size: 85%;
background-color: rgba(0,0,0,0.04);
border-radius: 3px;
}
code:before,
code:after {
letter-spacing: -0.2em;
content: "\00a0";
}
pre>code {
padding: 0;
margin: 0;
font-size: 100%;
word-break: normal;
white-space: pre;
background: transparent;
border: 0;
}
.highlight {
margin-bottom: 16px;
}
.highlight pre,
pre {
padding: 16px;
overflow: auto;
font-size: 85%;
line-height: 1.45;
background-color: #f7f7f7;
border-radius: 3px;
}
.highlight pre {
margin-bottom: 0;
word-break: normal;
}
pre {
word-wrap: normal;
}
pre code {
display: inline;
max-width: initial;
padding: 0;
margin: 0;
overflow: initial;
line-height: inherit;
word-wrap: normal;
background-color: transparent;
border: 0;
}
pre code:before,
pre code:after {
content: normal;
}
kbd {
display: inline-block;
padding: 3px 5px;
font-size: 11px;
line-height: 10px;
color: #555;
vertical-align: middle;
background-color: #fcfcfc;
border: solid 1px #ccc;
border-bottom-color: #bbb;
border-radius: 3px;
box-shadow: inset 0 -1px 0 #bbb;
}
.pl-c {
color: #969896;
}
.pl-c1,
.pl-s .pl-v {
color: #0086b3;
}
.pl-e,
.pl-en {
color: #795da3;
}
.pl-s .pl-s1,
.pl-smi {
color: #333;
}
.pl-ent {
color: #63a35c;
}
.pl-k {
color: #a71d5d;
}
.pl-pds,
.pl-s,
.pl-s .pl-pse .pl-s1,
.pl-sr,
.pl-sr .pl-cce,
.pl-sr .pl-sra,
.pl-sr .pl-sre {
color: #183691;
}
.pl-v {
color: #ed6a43;
}
.pl-id {
color: #b52a1d;
}
.pl-ii {
background-color: #b52a1d;
color: #f8f8f8;
}
.pl-sr .pl-cce {
color: #63a35c;
font-weight: bold;
}
.pl-ml {
color: #693a17;
}
.pl-mh,
.pl-mh .pl-en,
.pl-ms {
color: #1d3e81;
font-weight: bold;
}
.pl-mq {
color: #008080;
}
.pl-mi {
color: #333;
font-style: italic;
}
.pl-mb {
color: #333;
font-weight: bold;
}
.pl-md {
background-color: #ffecec;
color: #bd2c00;
}
.pl-mi1 {
background-color: #eaffea;
color: #55a532;
}
.pl-mdr {
color: #795da3;
font-weight: bold;
}
.pl-mo {
color: #1d3e81;
}
kbd {
display: inline-block;
padding: 3px 5px;
font: 11px Consolas, "Liberation Mono", Menlo, Courier, monospace;
line-height: 10px;
color: #555;
vertical-align: middle;
background-color: #fcfcfc;
border: solid 1px #ccc;
border-bottom-color: #bbb;
border-radius: 3px;
box-shadow: inset 0 -1px 0 #bbb;
}
.task-list-item {
list-style-type: none;
}
.task-list-item+.task-list-item {
margin-top: 3px;
}
.task-list-item input {
margin: 0 0.35em 0.25em -1.6em;
vertical-align: middle;
}
:checked+.radio-label {
z-index: 1;
position: relative;
border-color: #4078c0;
}
.sourceLine {
display: inline-block;
}
code .kw { color: #000000; }
code .dt { color: #ed6a43; }
code .dv { color: #009999; }
code .bn { color: #009999; }
code .fl { color: #009999; }
code .ch { color: #009999; }
code .st { color: #183691; }
code .co { color: #969896; }
code .ot { color: #0086b3; }
code .al { color: #a61717; }
code .fu { color: #63a35c; }
code .er { color: #a61717; background-color: #e3d2d2; }
code .wa { color: #000000; }
code .cn { color: #008080; }
code .sc { color: #008080; }
code .vs { color: #183691; }
code .ss { color: #183691; }
code .im { color: #000000; }
code .va {color: #008080; }
code .cf { color: #000000; }
code .op { color: #000000; }
code .bu { color: #000000; }
code .ex { color: #000000; }
code .pp { color: #999999; }
code .at { color: #008080; }
code .do { color: #969896; }
code .an { color: #008080; }
code .cv { color: #008080; }
code .in { color: #008080; }
</style>
<style>
body {
box-sizing: border-box;
min-width: 200px;
max-width: 980px;
margin: 0 auto;
padding: 45px;
padding-top: 0px;
}
</style>


</head>

<body>

<h1 id="lab-05---data-wrangling">Lab 05 - Data Wrangling</h1>
<h1 id="learning-goals">Learning goals</h1>
<ul>
<li>Use the <code>merge()</code> function to join two datasets.</li>
<li>Deal with missings and impute data.</li>
<li>Identify relevant observations using <code>quantile()</code>.</li>
<li>Practice your GitHub skills.</li>
</ul>
<h1 id="lab-description">Lab description</h1>
<p>For this lab we will be dealing with the meteorological dataset
<code>met</code>. In this case, we will use <code>data.table</code> to
answer some questions regarding the <code>met</code> dataset, while at
the same time practice your Git+GitHub skills for this project.</p>
<p>This markdown document should be rendered using
<code>github_document</code> document.</p>
<h1 id="part-1-setup-a-git-project-and-the-github-repository">Part 1:
Setup a Git project and the GitHub repository</h1>
<ol style="list-style-type: decimal">
<li><p>Go to wherever you are planning to store the data on your
computer, and create a folder for this project.</p></li>
<li><p>In that folder, save <a href="https://github.com/JSC370/JSC370-2024/blob/main/labs/lab05/lab05-wrangling-gam.Rmd">this
template</a> as “README.Rmd”. This will be the markdown file where all
the magic will happen.</p></li>
<li><p>Go to your GitHub account and create a new repository of the same
name that your local folder has, e.g., “JSC370-labs”.</p></li>
<li><p>Initialize the Git project, add the “README.Rmd” file, and make
your first commit.</p></li>
<li><p>Add the repo you just created on GitHub.com to the list of
remotes, and push your commit to origin while setting the
upstream.</p></li>
</ol>
<p>Most of the steps can be done using command line:</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb1-1"><a href="#cb1-1" tabindex="-1"></a><span class="co"># Step 1</span></span>
<span id="cb1-2"><a href="#cb1-2" tabindex="-1"></a><span class="bu">cd</span> ~/Documents</span>
<span id="cb1-3"><a href="#cb1-3" tabindex="-1"></a><span class="fu">mkdir</span> JSC370-labs</span>
<span id="cb1-4"><a href="#cb1-4" tabindex="-1"></a><span class="bu">cd</span> JSC370-labs</span>
<span id="cb1-5"><a href="#cb1-5" tabindex="-1"></a></span>
<span id="cb1-6"><a href="#cb1-6" tabindex="-1"></a><span class="co"># Step 2</span></span>
<span id="cb1-7"><a href="#cb1-7" tabindex="-1"></a><span class="fu">wget</span> https://raw.githubusercontent.com/JSC370/JSC370-2024/main/labs/lab05/lab05-wrangling-gam.Rmd</span>
<span id="cb1-8"><a href="#cb1-8" tabindex="-1"></a><span class="fu">mv</span> lab05-wrangling-gam.Rmd README.Rmd</span>
<span id="cb1-9"><a href="#cb1-9" tabindex="-1"></a><span class="co"># if wget is not available,</span></span>
<span id="cb1-10"><a href="#cb1-10" tabindex="-1"></a><span class="ex">curl</span> https://raw.githubusercontent.com/JSC370/JSC370-2024/main/labs/lab05/lab05-wrangling-gam.Rmd <span class="at">--output</span> README.Rmd</span>
<span id="cb1-11"><a href="#cb1-11" tabindex="-1"></a></span>
<span id="cb1-12"><a href="#cb1-12" tabindex="-1"></a><span class="co"># Step 3</span></span>
<span id="cb1-13"><a href="#cb1-13" tabindex="-1"></a><span class="co"># Happens on github</span></span>
<span id="cb1-14"><a href="#cb1-14" tabindex="-1"></a></span>
<span id="cb1-15"><a href="#cb1-15" tabindex="-1"></a><span class="co"># Step 4</span></span>
<span id="cb1-16"><a href="#cb1-16" tabindex="-1"></a><span class="fu">git</span> init</span>
<span id="cb1-17"><a href="#cb1-17" tabindex="-1"></a><span class="fu">git</span> add README.Rmd</span>
<span id="cb1-18"><a href="#cb1-18" tabindex="-1"></a><span class="fu">git</span> commit <span class="at">-m</span> <span class="st">&quot;First commit&quot;</span></span>
<span id="cb1-19"><a href="#cb1-19" tabindex="-1"></a></span>
<span id="cb1-20"><a href="#cb1-20" tabindex="-1"></a><span class="co"># Step 5</span></span>
<span id="cb1-21"><a href="#cb1-21" tabindex="-1"></a><span class="fu">git</span> remote add origin git@github.com:<span class="pp">[</span><span class="ss">username</span><span class="pp">]</span>/JSC370-labs</span>
<span id="cb1-22"><a href="#cb1-22" tabindex="-1"></a><span class="fu">git</span> push <span class="at">-u</span> origin master</span></code></pre></div>
<p>You can also complete the steps in R (replace with your
paths/username when needed)</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1" tabindex="-1"></a><span class="co"># Step 1</span></span>
<span id="cb2-2"><a href="#cb2-2" tabindex="-1"></a><span class="fu">setwd</span>(<span class="st">&quot;~/Documents&quot;</span>)</span>
<span id="cb2-3"><a href="#cb2-3" tabindex="-1"></a><span class="fu">dir.create</span>(<span class="st">&quot;JSC370-labs&quot;</span>)</span>
<span id="cb2-4"><a href="#cb2-4" tabindex="-1"></a><span class="fu">setwd</span>(<span class="st">&quot;JSC370-labs&quot;</span>)</span>
<span id="cb2-5"><a href="#cb2-5" tabindex="-1"></a></span>
<span id="cb2-6"><a href="#cb2-6" tabindex="-1"></a><span class="co"># Step 2</span></span>
<span id="cb2-7"><a href="#cb2-7" tabindex="-1"></a><span class="fu">download.file</span>(</span>
<span id="cb2-8"><a href="#cb2-8" tabindex="-1"></a>  <span class="st">&quot;https://raw.githubusercontent.com/JSC370/JSC370-2024/main/labs/lab05/lab05-wrangling-gam.Rmd&quot;</span>,</span>
<span id="cb2-9"><a href="#cb2-9" tabindex="-1"></a>  <span class="at">destfile =</span> <span class="st">&quot;README.Rmd&quot;</span></span>
<span id="cb2-10"><a href="#cb2-10" tabindex="-1"></a>  )</span>
<span id="cb2-11"><a href="#cb2-11" tabindex="-1"></a></span>
<span id="cb2-12"><a href="#cb2-12" tabindex="-1"></a><span class="co"># Step 3: Happens on Github</span></span>
<span id="cb2-13"><a href="#cb2-13" tabindex="-1"></a></span>
<span id="cb2-14"><a href="#cb2-14" tabindex="-1"></a><span class="co"># Step 4</span></span>
<span id="cb2-15"><a href="#cb2-15" tabindex="-1"></a><span class="fu">system</span>(<span class="st">&quot;git init &amp;&amp; git add README.Rmd&quot;</span>)</span>
<span id="cb2-16"><a href="#cb2-16" tabindex="-1"></a><span class="fu">system</span>(<span class="st">&#39;git commit -m &quot;First commit&quot;&#39;</span>)</span>
<span id="cb2-17"><a href="#cb2-17" tabindex="-1"></a></span>
<span id="cb2-18"><a href="#cb2-18" tabindex="-1"></a><span class="co"># Step 5</span></span>
<span id="cb2-19"><a href="#cb2-19" tabindex="-1"></a><span class="fu">system</span>(<span class="st">&quot;git remote add origin git@github.com:[username]/JSC370-labs&quot;</span>)</span>
<span id="cb2-20"><a href="#cb2-20" tabindex="-1"></a><span class="fu">system</span>(<span class="st">&quot;git push -u origin master&quot;</span>)</span></code></pre></div>
<p>Once you are done setting up the project, you can now start working
with the MET data.</p>
<h2 id="setup-in-r">Setup in R</h2>
<ol style="list-style-type: decimal">
<li>Load the <code>data.table</code> (and the <code>dtplyr</code> and
<code>dplyr</code> packages), <code>mgcv</code>, <code>ggplot2</code>,
<code>leaflet</code>, <code>kableExtra</code>.</li>
</ol>
<div class="sourceCode" id="cb3"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1" tabindex="-1"></a><span class="fu">library</span>(data.table)</span>
<span id="cb3-2"><a href="#cb3-2" tabindex="-1"></a><span class="fu">library</span>(dtplyr)</span>
<span id="cb3-3"><a href="#cb3-3" tabindex="-1"></a><span class="fu">library</span>(dplyr)</span>
<span id="cb3-4"><a href="#cb3-4" tabindex="-1"></a><span class="fu">library</span>(mgcv)</span>
<span id="cb3-5"><a href="#cb3-5" tabindex="-1"></a><span class="fu">library</span>(ggplot2)</span>
<span id="cb3-6"><a href="#cb3-6" tabindex="-1"></a><span class="fu">library</span>(leaflet)</span>
<span id="cb3-7"><a href="#cb3-7" tabindex="-1"></a><span class="fu">library</span>(kableExtra)</span></code></pre></div>
<div class="sourceCode" id="cb4"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb4-1"><a href="#cb4-1" tabindex="-1"></a>fn <span class="ot">&lt;-</span> <span class="st">&quot;https://raw.githubusercontent.com/JSC370/JSC370-2024/main/data/met_all_2023.gz&quot;</span></span>
<span id="cb4-2"><a href="#cb4-2" tabindex="-1"></a><span class="cf">if</span> (<span class="sc">!</span><span class="fu">file.exists</span>(<span class="st">&quot;met_all_2023.gz&quot;</span>))</span>
<span id="cb4-3"><a href="#cb4-3" tabindex="-1"></a>  <span class="fu">download.file</span>(fn, <span class="at">destfile =</span> <span class="st">&quot;met_all_2023.gz&quot;</span>)</span>
<span id="cb4-4"><a href="#cb4-4" tabindex="-1"></a>met <span class="ot">&lt;-</span> data.table<span class="sc">::</span><span class="fu">fread</span>(<span class="st">&quot;met_all_2023.gz&quot;</span>)</span></code></pre></div>
<ol start="2" style="list-style-type: decimal">
<li>Load the met data from <a href="https://github.com/JSC370/JSC370-2024/main/data/met_all_2023.gz">https://github.com/JSC370/JSC370-2024/main/data/met_all_2023.gz</a>
or (Use <a href="https://raw.githubusercontent.com/JSC370/JSC370-2024/main/data/met_all_2023.gz">https://raw.githubusercontent.com/JSC370/JSC370-2024/main/data/met_all_2023.gz</a>
to download programmatically), and also the station data. For the
latter, you can use the code we used during lecture to pre-process the
stations data:</li>
</ol>
<div class="sourceCode" id="cb5"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb5-1"><a href="#cb5-1" tabindex="-1"></a><span class="co"># Download the data</span></span>
<span id="cb5-2"><a href="#cb5-2" tabindex="-1"></a>stations <span class="ot">&lt;-</span> <span class="fu">fread</span>(<span class="st">&quot;ftp://ftp.ncdc.noaa.gov/pub/data/noaa/isd-history.csv&quot;</span>)</span>
<span id="cb5-3"><a href="#cb5-3" tabindex="-1"></a>stations[, USAF <span class="sc">:=</span> <span class="fu">as.integer</span>(USAF)]</span></code></pre></div>
<pre><code>## Warning in eval(jsub, SDenv, parent.frame()): NAs introduced by coercion</code></pre>
<div class="sourceCode" id="cb7"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb7-1"><a href="#cb7-1" tabindex="-1"></a><span class="co"># Dealing with NAs and 999999</span></span>
<span id="cb7-2"><a href="#cb7-2" tabindex="-1"></a>stations[, USAF   <span class="sc">:=</span> <span class="fu">fifelse</span>(USAF <span class="sc">==</span> <span class="dv">999999</span>, <span class="cn">NA_integer_</span>, USAF)]</span>
<span id="cb7-3"><a href="#cb7-3" tabindex="-1"></a>stations[, CTRY   <span class="sc">:=</span> <span class="fu">fifelse</span>(CTRY <span class="sc">==</span> <span class="st">&quot;&quot;</span>, <span class="cn">NA_character_</span>, CTRY)]</span>
<span id="cb7-4"><a href="#cb7-4" tabindex="-1"></a>stations[, STATE  <span class="sc">:=</span> <span class="fu">fifelse</span>(STATE <span class="sc">==</span> <span class="st">&quot;&quot;</span>, <span class="cn">NA_character_</span>, STATE)]</span>
<span id="cb7-5"><a href="#cb7-5" tabindex="-1"></a></span>
<span id="cb7-6"><a href="#cb7-6" tabindex="-1"></a><span class="co"># Selecting the three relevant columns, and keeping unique records</span></span>
<span id="cb7-7"><a href="#cb7-7" tabindex="-1"></a>stations <span class="ot">&lt;-</span> <span class="fu">unique</span>(stations[, <span class="fu">list</span>(USAF, CTRY, STATE, LAT, LON)])</span>
<span id="cb7-8"><a href="#cb7-8" tabindex="-1"></a></span>
<span id="cb7-9"><a href="#cb7-9" tabindex="-1"></a><span class="co"># Dropping NAs</span></span>
<span id="cb7-10"><a href="#cb7-10" tabindex="-1"></a>stations <span class="ot">&lt;-</span> stations[<span class="sc">!</span><span class="fu">is.na</span>(USAF)]</span>
<span id="cb7-11"><a href="#cb7-11" tabindex="-1"></a></span>
<span id="cb7-12"><a href="#cb7-12" tabindex="-1"></a><span class="co"># Removing duplicates</span></span>
<span id="cb7-13"><a href="#cb7-13" tabindex="-1"></a>stations[, n <span class="sc">:=</span> <span class="dv">1</span><span class="sc">:</span>.N, by <span class="ot">=</span> .(USAF)]</span>
<span id="cb7-14"><a href="#cb7-14" tabindex="-1"></a>stations <span class="ot">&lt;-</span> stations[n <span class="sc">==</span> <span class="dv">1</span>,][, n <span class="sc">:=</span> <span class="cn">NULL</span>]</span>
<span id="cb7-15"><a href="#cb7-15" tabindex="-1"></a></span>
<span id="cb7-16"><a href="#cb7-16" tabindex="-1"></a><span class="co"># Read in the met data and fix lat, lon, temp</span></span></code></pre></div>
<ol start="3" style="list-style-type: decimal">
<li>Merge the data as we did during the lecture. Use the
<code>merge()</code> code and you can also try the tidy way with
<code>left_join()</code></li>
</ol>
<div class="sourceCode" id="cb8"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb8-1"><a href="#cb8-1" tabindex="-1"></a>met_dt <span class="ot">&lt;-</span> <span class="fu">merge</span>(</span>
<span id="cb8-2"><a href="#cb8-2" tabindex="-1"></a>  <span class="at">x =</span> met,</span>
<span id="cb8-3"><a href="#cb8-3" tabindex="-1"></a>  <span class="at">y =</span> stations,</span>
<span id="cb8-4"><a href="#cb8-4" tabindex="-1"></a>  <span class="at">by.x =</span> <span class="st">&quot;USAFID&quot;</span>,</span>
<span id="cb8-5"><a href="#cb8-5" tabindex="-1"></a>  <span class="at">by.y =</span> <span class="st">&quot;USAF&quot;</span>,</span>
<span id="cb8-6"><a href="#cb8-6" tabindex="-1"></a>  <span class="at">all.x =</span> <span class="cn">TRUE</span>,</span>
<span id="cb8-7"><a href="#cb8-7" tabindex="-1"></a>  <span class="at">all.y =</span> <span class="cn">FALSE</span></span>
<span id="cb8-8"><a href="#cb8-8" tabindex="-1"></a>)</span>
<span id="cb8-9"><a href="#cb8-9" tabindex="-1"></a><span class="fu">head</span>(met_dt)</span></code></pre></div>
<pre><code>##    USAFID  WBAN year month day hour min   lat     lon elev wind.dir wind.dir.qc
## 1: 690150 93121 2023     6   1   NA  56 34294 -116147  696      240           5
## 2: 690150 93121 2023     6   1    1  56 34294 -116147  696       NA           9
## 3: 690150 93121 2023     6   1    2  56 34294 -116147  696      300           5
## 4: 690150 93121 2023     6   1    3  56 34294 -116147  696      300           5
## 5: 690150 93121 2023     6   1    4  56 34294 -116147  696      310           5
## 6: 690150 93121 2023     6   1    5  56 34294 -116147  696       20           5
##    wind.type.code wind.sp wind.sp.qc ceiling.ht ceiling.ht.qc ceiling.ht.method
## 1:              N      15          5      22000             5                 9
## 2:              C      NA          5      22000             5                 9
## 3:              N      93          5      22000             5                 9
## 4:              N     108          5      22000             5                 9
## 5:              N      72          5      22000             5                 9
## 6:              N      31          5      22000             5                 9
##    sky.cond vis.dist vis.dist.qc vis.var vis.var.qc temp temp.qc dew.point
## 1:        N    16093           5       N          5  289       5         6
## 2:        N    16093           5       N          5  289       5        22
## 3:        N    16093           5       N          5  261       5        50
## 4:        N    16093           5       N          5  239       5        61
## 5:        N    16093           5       N          5  233       5        67
## 6:        N    16093           5       N          5  222       5        67
##    dew.point.qc atm.press atm.press.qc CTRY STATE    LAT      LON
## 1:            5     10040            5   US    CA 34.294 -116.147
## 2:            5     10041            5   US    CA 34.294 -116.147
## 3:            5     10046            5   US    CA 34.294 -116.147
## 4:            5     10052            5   US    CA 34.294 -116.147
## 5:            5     10055            5   US    CA 34.294 -116.147
## 6:            5     10065            5   US    CA 34.294 -116.147</code></pre>
<h2 id="question-1-identifying-representative-stations">Question 1:
Identifying Representative Stations</h2>
<p>Across all weather stations, which stations have the median values of
temperature, wind speed, and atmospheric pressure? Using the
<code>quantile()</code> function, identify these three stations. Do they
coincide?</p>
<div class="sourceCode" id="cb10"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb10-1"><a href="#cb10-1" tabindex="-1"></a>med_met_dt <span class="ot">&lt;-</span> met_dt <span class="sc">|&gt;</span></span>
<span id="cb10-2"><a href="#cb10-2" tabindex="-1"></a>  <span class="fu">group_by</span>(USAFID) <span class="sc">|&gt;</span></span>
<span id="cb10-3"><a href="#cb10-3" tabindex="-1"></a>  <span class="fu">summarize_at</span>(<span class="fu">vars</span>(temp, wind.sp, atm.press), <span class="sc">~</span><span class="fu">quantile</span>(.x, <span class="fl">0.5</span>, <span class="at">na.rm =</span> <span class="cn">TRUE</span>))</span>
<span id="cb10-4"><a href="#cb10-4" tabindex="-1"></a><span class="fu">head</span>(med_met_dt)</span></code></pre></div>
<pre><code>## # A tibble: 6 × 4
##   USAFID  temp wind.sp atm.press
##    &lt;int&gt; &lt;dbl&gt;   &lt;dbl&gt;     &lt;dbl&gt;
## 1 690150  267       41     10094
## 2 720110  280       31        NA
## 3 720113  200       31        NA
## 4 720120  240       36        NA
## 5 720137  211       26        NA
## 6 720151  280.      36        NA</code></pre>
<div class="sourceCode" id="cb12"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb12-1"><a href="#cb12-1" tabindex="-1"></a>med_temp <span class="ot">&lt;-</span> <span class="fu">quantile</span>(met_dt<span class="sc">$</span>temp, <span class="fl">0.5</span>, <span class="at">na.rm =</span> <span class="cn">TRUE</span>)</span>
<span id="cb12-2"><a href="#cb12-2" tabindex="-1"></a>med_wind_sp <span class="ot">&lt;-</span> <span class="fu">quantile</span>(met_dt<span class="sc">$</span>wind.sp, <span class="fl">0.5</span>, <span class="at">na.rm =</span> <span class="cn">TRUE</span>)</span>
<span id="cb12-3"><a href="#cb12-3" tabindex="-1"></a>med_atm_press <span class="ot">&lt;-</span> <span class="fu">quantile</span>(met_dt<span class="sc">$</span>atm.press, <span class="fl">0.5</span>, <span class="at">na.rm =</span> <span class="cn">TRUE</span>)</span></code></pre></div>
<p>Next identify the stations have these median values.</p>
<div class="sourceCode" id="cb13"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb13-1"><a href="#cb13-1" tabindex="-1"></a>med_temp_stat <span class="ot">&lt;-</span> med_met_dt <span class="sc">|&gt;</span></span>
<span id="cb13-2"><a href="#cb13-2" tabindex="-1"></a>  <span class="fu">filter</span>(temp <span class="sc">==</span> med_temp)</span>
<span id="cb13-3"><a href="#cb13-3" tabindex="-1"></a>med_wind_sp_stat <span class="ot">&lt;-</span> med_met_dt <span class="sc">|&gt;</span></span>
<span id="cb13-4"><a href="#cb13-4" tabindex="-1"></a>  <span class="fu">filter</span>(wind.sp <span class="sc">==</span> med_wind_sp)</span>
<span id="cb13-5"><a href="#cb13-5" tabindex="-1"></a>med_atm_press_stat <span class="ot">&lt;-</span> med_met_dt <span class="sc">|&gt;</span></span>
<span id="cb13-6"><a href="#cb13-6" tabindex="-1"></a>  <span class="fu">filter</span>(atm.press <span class="sc">==</span> med_atm_press)</span>
<span id="cb13-7"><a href="#cb13-7" tabindex="-1"></a></span>
<span id="cb13-8"><a href="#cb13-8" tabindex="-1"></a><span class="fu">head</span>(med_temp_stat)</span></code></pre></div>
<pre><code>## # A tibble: 6 × 4
##   USAFID  temp wind.sp atm.press
##    &lt;int&gt; &lt;dbl&gt;   &lt;dbl&gt;     &lt;dbl&gt;
## 1 720263   217    26          NA
## 2 720312   217    26          NA
## 3 720327   217    46          NA
## 4 722076   217    36          NA
## 5 722180   217    31       10107
## 6 722196   217    28.5     10106</code></pre>
<div class="sourceCode" id="cb15"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb15-1"><a href="#cb15-1" tabindex="-1"></a><span class="fu">head</span>(med_wind_sp_stat)</span></code></pre></div>
<pre><code>## # A tibble: 6 × 4
##   USAFID  temp wind.sp atm.press
##    &lt;int&gt; &lt;dbl&gt;   &lt;dbl&gt;     &lt;dbl&gt;
## 1 720110   280      31        NA
## 2 720113   200      31        NA
## 3 720258   180      31        NA
## 4 720261   277      31        NA
## 5 720266   185      31        NA
## 6 720267   200      31        NA</code></pre>
<div class="sourceCode" id="cb17"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb17-1"><a href="#cb17-1" tabindex="-1"></a><span class="fu">head</span>(med_atm_press_stat)</span></code></pre></div>
<pre><code>## # A tibble: 6 × 4
##   USAFID  temp wind.sp atm.press
##    &lt;int&gt; &lt;dbl&gt;   &lt;dbl&gt;     &lt;dbl&gt;
## 1 720394   239      21     10117
## 2 722085   244      31     10117
## 3 722348   244      21     10117
## 4 723119   217      31     10117
## 5 723124   211      26     10117
## 6 723270   239      31     10117</code></pre>
<div class="sourceCode" id="cb19"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb19-1"><a href="#cb19-1" tabindex="-1"></a><span class="fu">merge</span>(</span>
<span id="cb19-2"><a href="#cb19-2" tabindex="-1"></a>  <span class="at">x =</span> med_temp_stat,</span>
<span id="cb19-3"><a href="#cb19-3" tabindex="-1"></a>  <span class="at">y =</span> med_wind_sp_stat,</span>
<span id="cb19-4"><a href="#cb19-4" tabindex="-1"></a>  <span class="at">by.x =</span> <span class="st">&quot;USAFID&quot;</span>,</span>
<span id="cb19-5"><a href="#cb19-5" tabindex="-1"></a>  <span class="at">by.y =</span> <span class="st">&quot;USAFID&quot;</span>,</span>
<span id="cb19-6"><a href="#cb19-6" tabindex="-1"></a>  <span class="at">all.x =</span> <span class="cn">FALSE</span>,</span>
<span id="cb19-7"><a href="#cb19-7" tabindex="-1"></a>  <span class="at">all.y =</span> <span class="cn">FALSE</span></span>
<span id="cb19-8"><a href="#cb19-8" tabindex="-1"></a>) <span class="sc">|&gt;</span> <span class="fu">merge</span>(</span>
<span id="cb19-9"><a href="#cb19-9" tabindex="-1"></a>  <span class="at">y =</span> med_atm_press_stat,</span>
<span id="cb19-10"><a href="#cb19-10" tabindex="-1"></a>  <span class="at">by.x =</span> <span class="st">&quot;USAFID&quot;</span>,</span>
<span id="cb19-11"><a href="#cb19-11" tabindex="-1"></a>  <span class="at">by.y =</span> <span class="st">&quot;USAFID&quot;</span>,</span>
<span id="cb19-12"><a href="#cb19-12" tabindex="-1"></a>  <span class="at">all.x =</span> <span class="cn">FALSE</span>,</span>
<span id="cb19-13"><a href="#cb19-13" tabindex="-1"></a>  <span class="at">all.y =</span> <span class="cn">FALSE</span></span>
<span id="cb19-14"><a href="#cb19-14" tabindex="-1"></a>)</span></code></pre></div>
<pre><code>##   USAFID temp.x wind.sp.x atm.press.x temp.y wind.sp.y atm.press.y temp wind.sp
## 1 723119    217        31       10117    217        31       10117  217      31
##   atm.press
## 1     10117</code></pre>
<p><strong>Answer:</strong> From the above merges, the station with
USAFID 723119 has median temperature, wind speed, and atmospheric
pressure that match the national medians.</p>
<p>Knit the document, commit your changes, and save it on GitHub. Don’t
forget to add <code>README.md</code> to the tree, the first time you
render it.</p>
<h2 id="question-2-identifying-representative-stations-per-state">Question
2: Identifying Representative Stations per State</h2>
<p>Now let’s find the weather stations by state with closest temperature
and wind speed based on the euclidean distance from these medians.</p>
<div class="sourceCode" id="cb21"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb21-1"><a href="#cb21-1" tabindex="-1"></a>state_meds <span class="ot">&lt;-</span> met_dt <span class="sc">|&gt;</span></span>
<span id="cb21-2"><a href="#cb21-2" tabindex="-1"></a>  <span class="fu">select</span>(STATE, temp, wind.sp) <span class="sc">|&gt;</span></span>
<span id="cb21-3"><a href="#cb21-3" tabindex="-1"></a>  <span class="fu">group_by</span>(STATE) <span class="sc">|&gt;</span></span>
<span id="cb21-4"><a href="#cb21-4" tabindex="-1"></a>  <span class="fu">summarize</span>(</span>
<span id="cb21-5"><a href="#cb21-5" tabindex="-1"></a>    <span class="at">temp_state_med =</span> <span class="fu">median</span>(temp, <span class="at">na.rm =</span> <span class="cn">TRUE</span>),</span>
<span id="cb21-6"><a href="#cb21-6" tabindex="-1"></a>    <span class="at">wind_sp_state_med =</span> <span class="fu">median</span>(wind.sp, <span class="at">na.rm =</span> <span class="cn">TRUE</span>),</span>
<span id="cb21-7"><a href="#cb21-7" tabindex="-1"></a>  )</span>
<span id="cb21-8"><a href="#cb21-8" tabindex="-1"></a></span>
<span id="cb21-9"><a href="#cb21-9" tabindex="-1"></a>met_with_meds <span class="ot">&lt;-</span> <span class="fu">merge</span>(</span>
<span id="cb21-10"><a href="#cb21-10" tabindex="-1"></a>  <span class="at">x =</span> met_dt,</span>
<span id="cb21-11"><a href="#cb21-11" tabindex="-1"></a>  <span class="at">y =</span> state_meds,</span>
<span id="cb21-12"><a href="#cb21-12" tabindex="-1"></a>  <span class="at">by.x =</span> <span class="st">&quot;STATE&quot;</span>,</span>
<span id="cb21-13"><a href="#cb21-13" tabindex="-1"></a>  <span class="at">by.y =</span> <span class="st">&quot;STATE&quot;</span>,</span>
<span id="cb21-14"><a href="#cb21-14" tabindex="-1"></a>  <span class="at">all.x =</span> <span class="cn">TRUE</span>,</span>
<span id="cb21-15"><a href="#cb21-15" tabindex="-1"></a>  <span class="at">all.y =</span> <span class="cn">FALSE</span></span>
<span id="cb21-16"><a href="#cb21-16" tabindex="-1"></a>) <span class="sc">|&gt;</span></span>
<span id="cb21-17"><a href="#cb21-17" tabindex="-1"></a>  <span class="fu">select</span>(STATE, USAFID, temp, wind.sp, temp_state_med, wind_sp_state_med)</span>
<span id="cb21-18"><a href="#cb21-18" tabindex="-1"></a><span class="fu">head</span>(met_with_meds)</span></code></pre></div>
<pre><code>##    STATE USAFID temp wind.sp temp_state_med wind_sp_state_med
## 1:    AL 720265  247      15            233                26
## 2:    AL 720265  240      NA            233                26
## 3:    AL 720265  230      NA            233                26
## 4:    AL 720265  226      NA            233                26
## 5:    AL 720265  227      21            233                26
## 6:    AL 720265  230      26            233                26</code></pre>
<div class="sourceCode" id="cb23"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb23-1"><a href="#cb23-1" tabindex="-1"></a>stations_with_distances <span class="ot">&lt;-</span> met_with_meds <span class="sc">|&gt;</span></span>
<span id="cb23-2"><a href="#cb23-2" tabindex="-1"></a>  <span class="fu">group_by</span>(USAFID, STATE, temp_state_med, wind_sp_state_med) <span class="sc">|&gt;</span></span>
<span id="cb23-3"><a href="#cb23-3" tabindex="-1"></a>  <span class="fu">summarize</span>(</span>
<span id="cb23-4"><a href="#cb23-4" tabindex="-1"></a>    <span class="at">temp =</span> <span class="fu">median</span>(temp, <span class="at">na.rm =</span> <span class="cn">TRUE</span>),</span>
<span id="cb23-5"><a href="#cb23-5" tabindex="-1"></a>    <span class="at">wind.sp =</span> <span class="fu">median</span>(wind.sp, <span class="at">na.rm =</span> <span class="cn">TRUE</span>),</span>
<span id="cb23-6"><a href="#cb23-6" tabindex="-1"></a>  ) <span class="sc">|&gt;</span></span>
<span id="cb23-7"><a href="#cb23-7" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb23-8"><a href="#cb23-8" tabindex="-1"></a>    <span class="at">dist =</span> <span class="fu">sqrt</span>((temp <span class="sc">-</span> temp_state_med) <span class="sc">^</span> <span class="dv">2</span> <span class="sc">+</span> (wind.sp <span class="sc">-</span> wind_sp_state_med) <span class="sc">^</span> <span class="dv">2</span>)</span>
<span id="cb23-9"><a href="#cb23-9" tabindex="-1"></a>  )</span></code></pre></div>
<pre><code>## `summarise()` has grouped output by &#39;USAFID&#39;, &#39;STATE&#39;, &#39;temp_state_med&#39;. You
## can override using the `.groups` argument.</code></pre>
<div class="sourceCode" id="cb25"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb25-1"><a href="#cb25-1" tabindex="-1"></a>stations_with_distances <span class="sc">|&gt;</span></span>
<span id="cb25-2"><a href="#cb25-2" tabindex="-1"></a>  <span class="fu">group_by</span>(STATE) <span class="sc">|&gt;</span></span>
<span id="cb25-3"><a href="#cb25-3" tabindex="-1"></a>  <span class="fu">summarize</span>(<span class="at">dist =</span> <span class="fu">min</span>(dist, <span class="at">na.rm =</span> <span class="cn">TRUE</span>)) <span class="sc">|&gt;</span></span>
<span id="cb25-4"><a href="#cb25-4" tabindex="-1"></a>  <span class="fu">merge</span>(</span>
<span id="cb25-5"><a href="#cb25-5" tabindex="-1"></a>    <span class="at">y =</span> stations_with_distances,</span>
<span id="cb25-6"><a href="#cb25-6" tabindex="-1"></a>    <span class="at">by.x =</span> <span class="fu">c</span>(<span class="st">&quot;STATE&quot;</span>, <span class="st">&quot;dist&quot;</span>),</span>
<span id="cb25-7"><a href="#cb25-7" tabindex="-1"></a>    <span class="at">by.y =</span> <span class="fu">c</span>(<span class="st">&quot;STATE&quot;</span>, <span class="st">&quot;dist&quot;</span>),</span>
<span id="cb25-8"><a href="#cb25-8" tabindex="-1"></a>    <span class="at">all.x =</span> <span class="cn">TRUE</span>,</span>
<span id="cb25-9"><a href="#cb25-9" tabindex="-1"></a>    <span class="at">all.y =</span> <span class="cn">FALSE</span></span>
<span id="cb25-10"><a href="#cb25-10" tabindex="-1"></a>  ) <span class="sc">|&gt;</span></span>
<span id="cb25-11"><a href="#cb25-11" tabindex="-1"></a>  <span class="fu">select</span>(STATE, USAFID, dist)</span></code></pre></div>
<pre><code>##     STATE USAFID      dist
## 1      AL 720265  2.000000
## 2      AR 722188  1.000000
## 3      AR 743312  1.000000
## 4      AR 723405  1.000000
## 5      AZ 722728  5.000000
## 6      CA 722950  3.000000
## 7      CO 724695  1.000000
## 8      CT 725040  5.000000
## 9      DE 724093  2.000000
## 10     FL 722034  0.000000
## 11     FL 722037  0.000000
## 12     FL 722024  0.000000
## 13     FL 747830  0.000000
## 14     GA 747805  0.000000
## 15     GA 720962  0.000000
## 16     GA 720257  0.000000
## 17     GA 722255  0.000000
## 18     IA 725487  0.000000
## 19     IA 725469  0.000000
## 20     IA 722097  0.000000
## 21     IA 720309  0.000000
## 22     IA 725493  0.000000
## 23     IA 725453  0.000000
## 24     IA 725454  0.000000
## 25     IA 725464  0.000000
## 26     IA 725479  0.000000
## 27     IA 720412  0.000000
## 28     IA 725466  0.000000
## 29     ID 725867  1.000000
## 30     IL 744666  1.000000
## 31     IL 725326  1.000000
## 32     IN 744660  0.000000
## 33     KS 724655  0.000000
## 34     KY 724235  1.000000
## 35     LA 722334  1.000000
## 36     LA 720587  1.000000
## 37     MA 725059  0.000000
## 38     MD 725514  1.000000
## 39     ME 726190  0.000000
## 40     ME 727120  0.000000
## 41     ME 726060  0.000000
## 42     MI 726387  0.000000
## 43     MI 725395  0.000000
## 44     MN 726596  0.000000
## 45     MN 720283  0.000000
## 46     MN 722032  0.000000
## 47     MN 722006  0.000000
## 48     MN 726577  0.000000
## 49     MN 726561  0.000000
## 50     MO 724450  1.000000
## 51     MO 723300  1.000000
## 52     MS 722354  0.000000
## 53     MT 726770  0.000000
## 54     NC 722148  2.000000
## 55     NC 722131  2.000000
## 56     NC 720282  2.000000
## 57     NC 723067  2.000000
## 58     ND 720868  0.000000
## 59     ND 720866  0.000000
## 60     ND 727640  0.000000
## 61     ND 720871  0.000000
## 62     ND 720853  0.000000
## 63     ND 720867  0.000000
## 64     ND 720861  0.000000
## 65     ND 727677  0.000000
## 66     NE 725624  4.000000
## 67     NE 725525  4.000000
## 68     NH 726165  5.000000
## 69     NJ 724075  0.000000
## 70     NJ 720581  0.000000
## 71     NJ 725025  0.000000
## 72     NM 722683  5.830952
## 73     NV 724885 16.763055
## 74     NY 725190  0.000000
## 75     OH 720414  1.000000
## 76     OH 720713  1.000000
## 77     OH 720651  1.000000
## 78     OK 722164  2.000000
## 79     OR 726830  6.000000
## 80     OR 726886  6.000000
## 81     OR 725976  6.000000
## 82     PA 720324  2.692582
## 83     RI 725079  5.830952
## 84     RI 725054  5.830952
## 85     SC 720613  0.000000
## 86     SC 747918  0.000000
## 87     SC 720602  0.000000
## 88     SC 720611  0.000000
## 89     SC 720633  0.000000
## 90     SD 726518  5.000000
## 91     TN 720974  0.000000
## 92     TN 723249  0.000000
## 93     TX 722448  0.000000
## 94     TX 722523  0.000000
## 95     TX 722533  0.000000
## 96     UT 725750  7.810250
## 97     UT 725724  7.810250
## 98     VA 724036  3.000000
## 99     VT 720493  3.000000
## 100    WA 727924  0.000000
## 101    WI 726415  0.000000
## 102    WI 726457  0.000000
## 103    WI 726509  0.000000
## 104    WV 724177  5.000000
## 105    WY 720521  0.000000</code></pre>
<p>Knit the doc and save it on GitHub.</p>
<h2 id="question-3-in-the-geographic-center">Question 3: In the
Geographic Center?</h2>
<p>For each state, identify which station is closest to the geographic
mid-point (median) of the state. Combining these with the stations you
identified in the previous question, use <code>leaflet()</code> to
visualize all ~100 points in the same figure, applying different colors
for the geographic median and the temperature and wind speed median.</p>
<p>Knit the doc and save it on GitHub.</p>
<h2 id="question-4-summary-table-with-kableextra">Question 4: Summary
Table with <code>kableExtra</code></h2>
<p>Generate a summary table using <code>kable</code> where the rows are
each state and the columns represent average temperature broken down by
low, median, and high elevation stations.</p>
<p>Use the following breakdown for elevation:</p>
<ul>
<li>Low: elev &lt; 93</li>
<li>Mid: elev &gt;= 93 and elev &lt; 401</li>
<li>High: elev &gt;= 401</li>
</ul>
<p>Knit the document, commit your changes, and push them to GitHub.</p>
<h2 id="question-5-advanced-regression">Question 5: Advanced
Regression</h2>
<p>Let’s practice running regression models with smooth functions on X.
We need the <code>mgcv</code> package and <code>gam()</code> function to
do this.</p>
<ul>
<li><p>using your data with the median values per station, first create
a lazy table. Filter out values of atmospheric pressure outside of the
range 1000 to 1020. Examine the association between temperature (y) and
atmospheric pressure (x). Create a scatterplot of the two variables
using ggplot2. Add both a linear regression line and a smooth
line.</p></li>
<li><p>fit both a linear model and a spline model (use
<code>gam()</code> with a cubic regression spline on wind speed).
Summarize and plot the results from the models and interpret which model
is the best fit and why.</p></li>
</ul>
<h2 id="deliverables">Deliverables</h2>
<ul>
<li><p>.Rmd file (this file)</p></li>
<li><p>link to the .md file (with all outputs) in your GitHub
repository</p></li>
</ul>

</body>
</html>
